(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(16),s=t.n(c),o=t(3),a=t(0),u=function(e){var n=e.persons,t=e.setDisplayPersons;return Object(a.jsxs)("div",{children:["filter shown with ",Object(a.jsx)("input",{onChange:function(e){var r=e.target.value.toLowerCase(),c=n.filter((function(e){return e.name.toLowerCase().indexOf(r)>-1}));r.length>0?t(c):t(n)}})]})},i=t(7),d=t(4),l=t.n(d),b="/api/persons",j=function(e){return l.a.post(b,e).then((function(e){return e.data}))},f=function(){return l.a.get(b).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(b,"/").concat(e))},h=function(e,n){return l.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.persons,t=e.setPersons,r=e.newName,c=e.setNewName,s=e.newNumber,o=e.setNewNumber,u=e.setSuccessMessage,d=e.setErrorMessage,l=e.setDisplayPersons;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={name:r,number:s},b=n.find((function(e){return e.name===a.name}));if(b){if(b.number!==a.number){if(window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))){var f=Object(i.a)(Object(i.a)({},b),{},{number:a.number});return h(f.id,f).then((function(e){t(n.map((function(n){return n.id!==f.id?n:e}))),l(n.map((function(n){return n.id!==f.id?n:e}))),u("".concat(f.name,"'s number as been changed.")),c(""),o(""),setTimeout((function(){u(null)}),3e3)})).catch((function(e){d("Information of ".concat(r," has already been removed from server")),setTimeout((function(){d(null)}),3e3)}))}return}return alert("".concat(a.name," is already added to phonebook."))}j(a).then((function(e){t(n.concat(e)),l(n.concat(e)),c(""),o(""),u("Added ".concat(a.name)),setTimeout((function(){u(null)}),3e3)})).catch((function(e){var n=e.response.data.error;d(n),setTimeout((function(){d(null)}),3e3)}))},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:r,onChange:function(e){c(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:s,onChange:function(e){o(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.person,t=e.handleRemovePerson;return Object(a.jsxs)("p",{children:[n.name," ",n.number," ",Object(a.jsx)("button",{onClick:t,children:"delete"})]})},v=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"notification",children:n})},x=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error-notification",children:n})},w=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],s=Object(r.useState)([]),i=Object(o.a)(s,2),d=i[0],l=i[1],b=Object(r.useState)(""),j=Object(o.a)(b,2),h=j[0],w=j[1],g=Object(r.useState)(""),N=Object(o.a)(g,2),y=N[0],P=N[1],S=Object(r.useState)(null),k=Object(o.a)(S,2),C=k[0],D=k[1],E=Object(r.useState)(null),M=Object(o.a)(E,2),T=M[0],A=M[1];Object(r.useEffect)((function(){f().then((function(e){c(e),l(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(v,{message:C}),Object(a.jsx)(x,{message:T}),Object(a.jsx)(u,{persons:t,setDisplayPersons:l}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(O,{persons:t,setPersons:c,setDisplayPersons:l,newName:h,setNewName:w,newNumber:y,setNewNumber:P,setSuccessMessage:D,setErrorMessage:A}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)("div",{children:d.map((function(e){return Object(a.jsx)(p,{person:e,handleRemovePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&(c(t.filter((function(n){return n.id!==e}))),l(t.filter((function(n){return n.id!==e}))),m(e),D("".concat(n.name," deleted successfully.")))}(e.id)}},e.id)}))})]})};t(41);s.a.render(Object(a.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.69edfab5.chunk.js.map